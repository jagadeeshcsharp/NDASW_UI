<div class="document-selector">
  <button class="selector-toggle" (click)="toggleSelector()" [attr.aria-expanded]="showSelector">
    <svg class="doc-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
      <polyline points="14 2 14 8 20 8"></polyline>
    </svg>
    <span class="text">Select Document</span>
    <span class="count" *ngIf="getSelectedCount() > 0">({{ getSelectedCount() }} selected)</span>
    <span class="arrow">{{ showSelector ? '▼' : '▶' }}</span>
  </button>

  <div class="selector-panel" *ngIf="showSelector">
    <div class="panel-header">
      <div class="panel-header-text">
        <h3>Available Documents</h3>
        <p class="selector-hint">Click on a document to select it as your Document Source</p>
      </div>
      <button class="refresh-btn" (click)="loadDocuments()" [disabled]="loading">
        {{ loading ? 'Loading...' : 'Refresh' }}
      </button>
    </div>

    <div class="documents-list" *ngIf="!loading && documents.length > 0">
      <div
        *ngFor="let doc of documents"
        class="document-item"
        [class.selected]="isSelected(doc.id)"
        (click)="selectDocument(doc.id)"
      >
        <span class="doc-name">{{ doc.fileName }}</span>
      </div>
    </div>

    <div class="empty-state" *ngIf="!loading && documents.length === 0">
      No documents available
    </div>

    <div class="loading-state" *ngIf="loading">
      Loading documents...
    </div>
  </div>
</div>

